<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### Table of Contents

-   [ParatiiCore][1]
    -   [migrateAccount][2]
-   [ParatiiCoreUsers][3]
    -   [create][4]
    -   [get][5]
    -   [update][6]
-   [ParatiiCoreVids][7]
    -   [like][8]
    -   [dislike][9]
    -   [doesLike][10]
    -   [hasViewedVideo][11]
    -   [doesDislike][12]
    -   [create][13]
    -   [update][14]
    -   [upsert][15]
    -   [view][16]
    -   [get][17]
    -   [search][18]
-   [ParatiiDb][19]
-   [ParatiiDbUsers][20]
    -   [get][21]
    -   [videos][22]
-   [ParatiiDbVids][23]
    -   [get][24]
    -   [search][25]
-   [ParatiiEthEvents][26]
    -   [\_getStructuredEvent][27]
    -   [addListener][28]
    -   [\_addListener][29]
    -   [\_isFunction][30]
    -   [addSubscription][31]
    -   [removeAllSubscriptions][32]
-   [ParatiiEth][33]
    -   [setAccount][34]
    -   [getContract][35]
    -   [requireContract][36]
    -   [deployContract][37]
    -   [sleep][38]
    -   [deployContracts][39]
    -   [setContractsProvider][40]
    -   [getContracts][41]
    -   [getContractAddress][42]
    -   [getRegistryAddress][43]
    -   [setRegistryAddress][44]
    -   [balanceOf][45]
    -   [\_transferETH][46]
    -   [\_transferPTI][47]
    -   [transfer][48]
-   [ParatiiEthTcr][49]
    -   [getTcrContract][50]
    -   [getMinDeposit][51]
    -   [isWhitelisted][52]
    -   [didVideoApply][53]
    -   [apply][54]
    -   [checkEligiblityAndApply][55]
    -   [exit][56]
-   [ParatiiEthUsers][57]
    -   [getRegistry][58]
    -   [create][59]
    -   [get][60]
    -   [update][61]
    -   [delete][62]
-   [ParatiiEthVids][63]
    -   [getVideoRegistry][64]
    -   [getLikesContract][65]
    -   [getViewsContract][66]
    -   [makeId][67]
    -   [create][68]
    -   [get][69]
    -   [sendLike][70]
    -   [view][71]
    -   [userViewedVideo][72]
    -   [like][73]
    -   [dislike][74]
    -   [doesLike][75]
    -   [doesDislike][76]
    -   [update][77]
    -   [delete][78]
-   [ParatiiEthVouchers][79]
    -   [getVouchersContract][80]
    -   [create][81]
    -   [test][82]
    -   [createVouchers][83]
    -   [redeem][84]
-   [patchWallet][85]
-   [create][86]
-   [isValidMnemonic][87]
-   [newMnemonic][88]
-   [\_decrypt][89]
-   [ParatiiIPFS][90]
    -   [add][91]
    -   [get][92]
    -   [log][93]
    -   [warn][94]
    -   [error][95]
    -   [getIPFSInstance][96]
    -   [addJSON][97]
    -   [addAndPinJSON][98]
    -   [getJSON][99]
    -   [start][100]
    -   [stop][101]
-   [Uploader][102]
    -   [onDrop][103]
    -   [xhrUpload][104]
    -   [add][105]
    -   [html5FileToPull][106]
    -   [fsFileToPull][107]
    -   [upload][108]
    -   [addDirectory][109]
    -   [transcode][110]
    -   [\_transcoderRespHander][111]
    -   [addAndTranscode][112]
    -   [\_signalTranscoder][113]
    -   [getMetaData][114]
    -   [pinFile][115]
    -   [\_pinResponseHandler][116]
-   [Paratii][117]
    -   [setAccount][118]
    -   [setRegistryAddress][119]
    -   [diagnose][120]
-   [accountSchema][121]

## ParatiiCore

Contains functions that operate transversally over several backend systems. <br />
validates the config file and istantiates ParatiiCoreVids and ParatiiCoreUsers.

**Parameters**

-   `config` **[Object][122]** configuration object to initialize Paratii object

### migrateAccount

migrate all contract data for  paratii.config.account to a new account

**Parameters**

-   `newAccount`  

## ParatiiCoreUsers

Utilities to create and manipulate information about the users on the blockchain.

**Parameters**

-   `config` **[Object][122]** configuration object to initialize Paratii object

### create

Creates a user, fields id, name and email go to the smart contract Users, other fields are stored on IPFS.

**Parameters**

-   `options` **[Object][122]** information about the video ( id, name, email ... )

**Examples**

```javascript
paratii.core.users.create({
             id: 'some-user-id',
             name: 'A user name',
             email: 'some@email.com',
             ...
            })
```

Returns **[Promise][123]** the id of the newly created user

### get

retrieve data about the user

**Parameters**

-   `id` **[String][124]** user univocal id

**Examples**

```javascript
paratii.core.users.get('some-user-id')
```

Returns **[Object][122]** data about the user

### update

Updates a user's details. name and email are defined in the smart contract Users, other fields get written to IPFS.

**Parameters**

-   `userId` **[String][124]** user univocal id
-   `options` **[Object][122]** updated data i.e. { name: 'A new user name' }

**Examples**

```javascript
paratii.core.users.update('some-user-id', {name: 'A new user name'})
```

Returns **[Promise][123]** updated data about the user

## ParatiiCoreVids

Utilities to create and manipulate information about the videos on the blockchain.

**Parameters**

-   `config` **[Object][122]** configuration object to initialize Paratii object

### like

Writes a like for the video on the blockchain (contract Likes), and negates a dislike for the video, if it exists.

**Parameters**

-   `videoId` **[String][124]** univocal video identifier

**Examples**

```javascript
paratii.core.vids.like('some-video-id')
```

Returns **[Object][122]** information about the transaction recording the like

### dislike

Writes a dislike for the video on the blockchain (contract Likes), and negates a like for the video, if it exists.

**Parameters**

-   `videoId` **[String][124]** univocal video identifier

**Examples**

```javascript
paratii.core.vids.dislike('some-video-id')
```

Returns **[Object][122]** information about the transaction recording the dislike

### doesLike

Check if the current user has already liked the video

**Parameters**

-   `videoId` **[String][124]** univocal video identifier

**Examples**

```javascript
paratii.core.vids.doesLike('some-video-id')
```

Returns **[Boolean][125]** true if the current user already liked the video, false otherwise

### hasViewedVideo

Check if the viewer has already viewed the video

**Parameters**

-   `viewer` **[String][124]** viewer address
-   `videoId` **[String][124]** univocal video identifier

**Examples**

```javascript
paratii.core.vids.hasViewedVideo('some-user-id','some-video-id')
```

Returns **[Boolean][125]** true if the current user already viewed the video, false otherwise

### doesDislike

Check if the current user has already disliked the video

**Parameters**

-   `videoId` **[String][124]** univocal video identifier

**Examples**

```javascript
paratii.core.vids.doesDislike('some-video-id')
```

Returns **[Boolean][125]** true if the current user already disliked the video, false otherwise

### create

This call will register the video on the blockchain, add its metadata to IPFS, upload file to IPFS, and transcode it

**Parameters**

-   `options` **[Object][122]** information about the video ( id, title, FilePath ... ) (optional, default `{}`)

**Examples**

```javascript
paratii.core.vids.create({
 id: 'some-video-id',
 owner: 'some-user-id',
 title: 'some Title',
 author: 'Steven Spielberg',
 duration: '2h 32m',
 description: 'A long description',
 price: 0,
 file: 'test/data/some-file.txt'
})
```

Returns **[Promise][123]** information about the video ( id, owner, ipfsHash ... )

### update

Update the information on the video.
 Only the account that has registered the video, or the owner of the contract, can update the information.

**Parameters**

-   `videoId` **[String][124]** univocal video identifier
-   `options` **[Object][122]** key value pairs of properties and new values e.g. ({title: 'another-title'})
-   `dataToUpdate` **[Object][122]** optional. old data of the video. If not passed to the method, it will fetch the data itself using the videoId

**Examples**

```javascript
paratii.core.vids.update('some-video-id', {title: 'another-title'})
```

Returns **[Promise][123]** Updated video informations

### upsert

Update the information of the video the video already exists, otherwise it creates it

**Parameters**

-   `options` **[Object][122]** video informations

**Examples**

```javascript
paratii.core.vids.upsert({ id: 'some-video-id', owner: 'some-user-id', title: 'videoTitle'}) //insert a new video
```

Returns **[Promise][123]** updated/new video informations

### view

Register a view on the blockchain

**Parameters**

-   `options` **[Object][122]** should contain keys viewer (address of the viewer) and videoId (univocal video identifier)

**Examples**

```javascript
paratii.core.vids.view({viewer:'some-user-id',videoId: 'some-video-id'})
```

Returns **[Promise][123]** information about the transaction recording the view

### get

Get the data of the video identified by videoId

**Parameters**

-   `videoId` **[String][124]** univocal video identifier

**Examples**

```javascript
paratii.core.vids.get('some-video-id')
```

Returns **[Promise][123]** data about the video

### search

Get the data of the video

**Parameters**

-   `options` **[Object][122]** data about the video and (optional) owner i.e {'keyword':'titleOfTheVideo'}

**Examples**

```javascript
paratii.core.vids.search({keyword : 'titleOftheVideo'})
the keyword value can be one from the following list
- video title
- description
- owner
- uploader.name
- uploader.address
- tags
```

Returns **[Promise][123]** data about the video

## ParatiiDb

ParatiiDb contains a functionality to interact with the Paratii Blockchain Index. <br>
validates the config file and istantiates ParatiiDbVids and ParatiiDbUsers.

**Parameters**

-   `config` **[Object][122]** 

## ParatiiDbUsers

ParatiiDbUsers contains functionalities regarding the users to interact with the Paratii Blockchain Index

**Parameters**

-   `config` **[Object][122]** object to initialize Paratii object

### get

retrieve data about the user

**Parameters**

-   `userId` **[String][124]** user univocal id

**Examples**

```javascript
paratii.db.users.get('some-user-id')
```

Returns **[Promise][123]** data about the user

### videos

get information about all the videos of the user

**Parameters**

-   `userId` **[String][124]** univocal user identifier

**Examples**

```javascript
paratii.db.users.videos('some-user-id')
```

Returns **[Promise][123]** Collection of all the videos of the user

## ParatiiDbVids

ParatiiDbUsers contains functionalities regarding the videos to interact with the Paratii Blockchain Index

**Parameters**

-   `config` **[Object][122]** object to initialize Paratii object

### get

Get information about this video from the db

**Parameters**

-   `videoId` **[String][124]** univocal video identifier

**Examples**

```javascript
paratii.db.vids.get('some-video-id')
```

Returns **[Promise][123]** data about the video

### search

Get the data of the video

**Parameters**

-   `options` **[Object][122]** data about the video and (optional) owner i.e {'keyword':'titleOfTheVideo'}

**Examples**

```javascript
paratii.db.vids.search({keyword : 'titleOftheVideo'})
the keyword value can be one from the following list
- video title
- description
- owner
- uploader.name
- uploader.address
- tags
```

Returns **[Promise][123]** data about the video

## ParatiiEthEvents

eth.events implements a part of the API of the EventEmitter, that can be used to manage subscriptions to Ethereum events.

**Parameters**

-   `config`  

### \_getStructuredEvent

parse event from simple string to an object

**Parameters**

-   `eventType` **[String][124]** Event type

**Examples**

```javascript
let structuredEvent = this._getStructuredEvent('some-event')
```

Returns **[Object][122]** Event Object

### addListener

subscribe to the specified event

**Parameters**

-   `eventType` **[String][124]** type of the event
-   `options` **[Function][126]** function called when the events occurs
-   `listener` **?** optional ?

Returns **[Promise][123]** [description]

### \_addListener

[_addListener description]

**Parameters**

-   `eventType` **\[type]** [description]
-   `listener` **\[type]** [description]
-   `options` **\[type]** [description]

Returns **[Promise][123]** [description]

### \_isFunction

[_isFunction description]

**Parameters**

-   `functionToCheck` **\[type]** [description]

Returns **[Boolean][125]** [description]

### addSubscription

[addSubscription description]

**Parameters**

-   `eventType` **\[type]** [description]
-   `subscription` **\[type]** [description]

### removeAllSubscriptions

[removeAllSubscriptions description]

**Parameters**

-   `eventType` **\[type]** [description]

Returns **\[type]** [description]

## ParatiiEth

contains functions to interact with the Ethereum blockchain and the Paratii contracts deployed there.

**Parameters**

-   `config` **[Object][122]** configuration object to initialize Paratii object

### setAccount

creates an account using the private key or, if not present, using the mnemonic

**Parameters**

-   `address` **[String][124]** public address
-   `privateKey` **[String][124]** private key related to the previous public address
-   `mnemonic` **[String][124]** mnemonic related to the previous public address

**Examples**

```javascript
paratii.eth.setAccount('some-address','some-private-key')
```

```javascript
paratii.eth.setAccount('some-address','some-mnemonic')
```

### getContract

Get the contract instance specified

**Parameters**

-   `name` **[String][124]** the name of the token

**Examples**

```javascript
paratii.eth.getContract('ParatiiToken')
```

Returns **[Promise][123]** Object representing the contract

### requireContract

creates the javascript contract object from the json file

**Parameters**

-   `contractName` **[String][124]** name of the contract

**Examples**

```javascript
paratii.eth.requireContract('ParatiiToken')
```

Returns **[String][124]** Contract Object

### deployContract

deploys contract on the blockchain

**Parameters**

-   `name` **[String][124]** name of the contract
-   `args` **[Object][122]** configuration for the contract (strings or numbers). It is allowed to pass more than one parameter

**Examples**

```javascript
paratii.eth.deployContract('ParatiiToken')
```

Returns **[Promise][123]** the deployed contract

### sleep

TODO: this is for testing - remove this

**Parameters**

-   `ms` **\[type]** millisec

**Examples**

```javascript
?
```

Returns **[Promise][123]** ?

### deployContracts

deploy all the contracts on the blockchain

**Examples**

```javascript
let contracts = await paratii.eth.deployContracts()
```

```javascript
let likes = await this.deployContract('Likes', paratiiRegistryAddress)
```

Returns **[Promise][123]** all the paratii contracts

### setContractsProvider

Set the provider on all the contracts

**Examples**

```javascript
paratii.eth.setContractsProvider()
```

### getContracts

return all the contracts

**Examples**

```javascript
let contracts = await paratii.eth.getContracts()
```

Returns **[Promise][123]** all the contracts

### getContractAddress

get the address of the contract on the blockchain

**Parameters**

-   `name` **[String][124]** name of the contract

**Examples**

```javascript
paratii.eth.getContractAddress('ParatiiToken')
```

Returns **[Promise][123]** Contract address on the blockchain (String)

### getRegistryAddress

get the address of the Registry contract on the blockchain

**Examples**

```javascript
let registryAddress = paratii.eth.getRegistryAddress()
```

Returns **[String][124]** address on the blockchain

### setRegistryAddress

set the address of the Registry contract on the blockchain

**Parameters**

-   `registryAddress` **[String][124]** new address

**Examples**

```javascript
await paratii.eth.setRegistryAddress('some-address')
```

### balanceOf

When called with a second argument, returns the balance of that Token.<br>
When called without a second argument, returns information about all relevant balances.

**Parameters**

-   `address` **[String][124]** ethereum address
-   `symbol` **[String][124]** optional - symbol of the token (ETH,PTI)

**Examples**

```javascript
paratii.eth.balanceOf('some-address', 'ETH') // returns the ETH balance of the given address
```

```javascript
paratii.eth.balanceOf('some-address', 'PTI') // returns the PTI balance of the given address
```

```javascript
paratii.eth.balanceOf('some-address') // returns both the PTI and the ETH balance of the given address
```

Returns **[Promise][123]** information about balances of that address

### \_transferETH

send ETH from current account to beneficiary

**Parameters**

-   `beneficiary` **[String][124]** ETH address
-   `amount` **[Number][127]** amount of ETH to be sent
-   `description` **[String][124]** optional - description of the transaction (will be written in the blockchain)

**Examples**

```javascript
return paratii.eth._transferETH('some-address', 20, 'an-optional-description')
```

Returns **[Promise][123]** information about the transaction recording the transfer

### \_transferPTI

send PTI from current account to beneficiary

**Parameters**

-   `beneficiary` **[String][124]** ETH address
-   `amount` **[Number][127]** amount of PTI to be sent

**Examples**

```javascript
return paratii.eth._transferPTI('some-address', 20)
```

Returns **[Promise][123]** information about the transaction recording the transfer

### transfer

Use this to send ETH or PTI from paratii.config.address

**Parameters**

-   `beneficiary` **[String][124]** ETH address
-   `amount` **[Number][127]** amount of ETH/PTI to be sent
-   `symbol` **[String][124]** symbol of the token to send (ETH,PTI)
-   `description` **\[type]** optional - description to be inserted in the blockchain

**Examples**

```javascript
let result = await paratii.eth.transfer('some-address', 20, 'ETH', 'thanks for all the fish')
```

Returns **[Promise][123]** information about the transaction recording the transfer

## ParatiiEthTcr

[eth description]

Type: \[type]

**Parameters**

-   `context` **[object][122]** ParatiiEth Instance

### getTcrContract

get TCR contract instance.

Returns **[Promise][123]** Contract instance.

### getMinDeposit

get the minimum amount required to stake a video.

Returns **Float** amount required in PTI

### isWhitelisted

check if video is already whitelisted or not. note that this returns false
till the video is actually whitelisted. use didVideoApply in case you want
to check whether the video is in application process.

**Parameters**

-   `videoId` **[string][124]** videoId

Returns **[boolean][125]** is video whitelisted or not.

### didVideoApply

check whether a video started the application process or not yet.

**Parameters**

-   `videoId` **[string][124]** videoId

Returns **[boolean][125]** did the video start the TCR process.

### apply

start the application process.
NOTE that this require the client approves PTI amount first before actually
running this function, use `checkEligiblityAndApply` instead.

**Parameters**

-   `videoId` **[string][124]** videoId
-   `amountToStake` **Float** number of tokens to stake. must >= minDeposit

Returns **[boolean][125]** returns true if all is good, plus \_Application
event.

### checkEligiblityAndApply

Stake amountToStake on video with id videoId
does a number of separate steps:

-   check preconditions for staking
-   approve that the TCR contract can transfer amountToStake tokens
-   apply to the TCR

**Parameters**

-   `videoId` **strin** [description]
-   `amountToStake` **[number][127]** [description]

Returns **[Promise][123]** [description]

### exit

remove the video given by videoId from the listing

**Parameters**

-   `videoId`  

## ParatiiEthUsers

The eth.user namespace contains functions to interact with the video registration on the blockchain.

**Parameters**

-   `context`  

### getRegistry

Get the contract instance of the user contract

Returns **[Promise][123]** Object representing the contract

### create

Creates a user

**Parameters**

-   `options` **[Object][122]** information about the user
    -   `options.id` **[String][124]** valid address
    -   `options.name` **[String][124]** name of the user
    -   `options.email` **[String][124]** email of the user
    -   `options.ipfsData` **[String][124]** ipfs hash

**Examples**

```javascript
let userData = {
                   id: 'some-id',
                   name: 'Humbert Humbert',
                   email: 'humbert@humbert.ru',
                   ipfsData: 'some-hash'
             }
        let result = await paratii.eth.users.create(userData)
```

Returns **[Promise][123]** the id of the newly created user

### get

Get a users details from the blockchain

**Parameters**

-   `userId` **[String][124]** valid address

**Examples**

```javascript
user = await paratii.eth.users.get('some-id')
```

Returns **[Promise][123]** information about the user

### update

Updates a user details on the blockchain.

**Parameters**

-   `userId` **[String][124]** valid address
-   `options` **[Object][122]** information to update. Left-out data is kept the same.

**Examples**

```javascript
await paratii.eth.users.update('some-id', {ipfsData: 'new-hash'})
```

Returns **[Promise][123]** updated data

### delete

Deletes a user from the blockchain. Can only be called by the contract owner or the user him/her-self

**Parameters**

-   `userId` **[String][124]** valid address

**Examples**

```javascript
await paratii.eth.users.delete('some-id')
```

Returns **[Promise][123]** blockchain transaction

## ParatiiEthVids

The eth.vids namespace contains functions to interact with the video registration on the blockchain.

**Parameters**

-   `context`  

### getVideoRegistry

Get the contract instance of the videos contract

**Examples**

```javascript
let contract = await paratii.eth.vids.getVideoRegistry()
```

Returns **[Promise][123]** Object representing the contract

### getLikesContract

Get the contract instance of the likes contract

**Examples**

```javascript
let contract = await paratii.eth.vids.getLikesContract()
```

Returns **[Promise][123]** Object representing the contract

### getViewsContract

Get the contract instance of the views contract

**Examples**

```javascript
let contract = await paratii.eth.vids.getViewsContract()
```

Returns **[Promise][123]** Object representing the contract

### makeId

Creates a random id

**Examples**

```javascript
let id = paratii.eth.vids.makeId()
```

Returns **[String][124]** id created

### create

Record the video on the blockchain

**Parameters**

-   `options` **[Object][122]** data about the video
-   `retry` **[Number][127]** optional, default = 1 (optional, default `1`)

**Examples**

```javascript
let videoId = await paratii.eth.vids.create({
                                   id: 'some-id',
                                   price: 20,
                                   owner: 'some-address',
                                   ipfsHash: 'some-hash'
                         })
```

Returns **[Promise][123]** the video id

### get

get data about the video

**Parameters**

-   `videoId` **[String][124]** univocal video id

**Examples**

```javascript
let video = eth.vids.get('0x12345')
```

Returns **[Promise][123]** data about the video

### sendLike

record a like/dislike to the video on the blockchain

**Parameters**

-   `options` **[Object][122]** data about the video to like
    -   `options.videoId` **[String][124]** univocal video id
    -   `options.liked` **[Boolean][125]** true/false
-   `type` **\[type]** REMOVE ???? NOT USED

**Examples**

```javascript
await paratii.eth.vids.sendLike({ videoId: 'some-id', liked: true })
```

```javascript
await paratii.eth.vids.sendLike({ videoId: 'some-id', liked: false })
```

Returns **[Promise][123]** transaction recording the like

### view

record a views to the video on the blockchain

**Parameters**

-   `options` **[Object][122]** data about the video and the viewer
    -   `options.viewer` **[String][124]** address of the viewer
    -   `options.videoId` **[String][124]** univocal video identifier
    -   `options.ipfsData` **[String][124]** ipfs multihash

**Examples**

```javascript
await paratii.eth.vids.view({viewer:'some-user-id',videoId: 'some-video-id'})
```

Returns **[Promise][123]** transaction recording the view

### userViewedVideo

Check if the viewer has already viewed the video

**Parameters**

-   `options` **[Object][122]** data about the video and the viewer
    -   `options.viewer` **[String][124]** viewer address
    -   `options.videoId` **[String][124]** univocal video identifier

**Examples**

```javascript
let result = await paratii.eth.vids.userViewedVideo({viewer:'some-user-id',videoId: 'some-video-id'})
```

Returns **[Promise][123]** true if the current user already viewed the video, false otherwise

### like

Writes a like for the video on the blockchain (contract Likes), and negates a dislike for the video, if it exists.

**Parameters**

-   `videoId` **[String][124]** univocal video identifier

**Examples**

```javascript
let result = paratii.eth.vids.like('some-id')
```

Returns **[Promise][123]** transaction recording the like

### dislike

Writes a dislike for the video on the blockchain (contract Likes), and negates a like for the video, if it exists.

**Parameters**

-   `videoId` **[String][124]** univocal video identifier

**Examples**

```javascript
let result = paratii.eth.vids.dislike('some-id')
```

Returns **[Promise][123]** transaction recording the dislike

### doesLike

Check if the current user has already liked the video

**Parameters**

-   `videoId` **[String][124]** univocal video identifier

**Examples**

```javascript
let result = paratii.eth.vids.doesLike('some-id')
```

Returns **[Promise][123]** true if the current user already liked the video, false otherwise

### doesDislike

Check if the current user has already disliked the video.

**Parameters**

-   `videoId` **[String][124]** univocal video identifier

**Examples**

```javascript
let result = paratii.eth.vids.doesDislike('some-id')
```

Returns **[Promise][123]** true if the current user already disliked the video, false otherwise

### update

Update the information on the video.
 Only the account that has registered the video, or the owner of the contract, can update the information.

**Parameters**

-   `videoId` **[String][124]** univocal video identifier
-   `options` **[Object][122]** key value pairs of properties and new values e.g. ({title: 'another-title'})

**Examples**

```javascript
paratii.eth.vids.update('some-video-id', {title: 'another-title'})
```

Returns **[Promise][123]** Updated video informations

### delete

delete the video from the blockchain

**Parameters**

-   `videoId` **[String][124]** univocal video identifier

**Examples**

```javascript
let tx = paratii.eth.vids.delete('some-id')
```

Returns **[Promise][123]** transaction recording the remove action

## ParatiiEthVouchers

Functions for redeeming vouchers

**Parameters**

-   `context`  

### getVouchersContract

Get the contract instance of the vouchers contract

**Examples**

```javascript
let contract = await paratii.eth.vids.getVouchersContract()
```

Returns **[Promise][123]** Object representing the contract

### create

Function for creating a voucher. Can only be called by the owner of the contract.

**Parameters**

-   `options` **[Object][122]** data about the voucher
    -   `options.voucherCode` **[String][124]** unique string associated to this voucher
    -   `options.amount` **[Number][127]** amount of PTI in wei of this voucher

**Examples**

```javascript
await paratii.eth.vouchers.create({ voucherCode: 'some-id', amount: 10 })
```

Returns **[Promise][123]** the voucher id

### test

throws a test error

### createVouchers

Generates a given number of vouchers with unique IDs, and the given amount, and returns an array of objects.

**Parameters**

-   `number` **[Number][127]** number of voucher to create
-   `amount` **\[type]** amount of every voucher

**Examples**

```javascript
let vouchers = await paratii.eth.vouchers.createVouchers(10, 10)
```

Returns **[Promise][123]** Object containing every voucher created

### redeem

Function for redeeming a voucher to the current account's address.

**Parameters**

-   `voucherCode` **[String][124]** univocal voucher code

**Examples**

```javascript
await paratii.eth.vouchers.redeem('some-code')
```

Returns **[Promise][123]** true if everything goes well, otherwise throws an error

## patchWallet

overrides some web3js wallet functionalties

**Parameters**

-   `wallet` **[Object][122]** wallet to patch
-   `config` **[Object][122]** configuration object to initialize Paratii object

Returns **[Object][122]** patched wallet

## create

Create a wallet with a given number of accounts from a BIP39 mnemonic

**Parameters**

-   `numberOfAccounts` **[Number][127]** number of accounts to be created
-   `mnemonic` **[String][124]** optional - mnemonic of the wallet, if not specified a random one is generated

**Examples**

```javascript
wallet = await wallet.create(5, 'some long mnemonic phrase')
```

Returns **[Object][122]** the created wallet

## isValidMnemonic

checorigDecryptk if the passed mnemonic is bip39 valid

**Parameters**

-   `mnemonic` **\[type]** mnemonic to check

**Examples**

```javascript
paratii.eth.wallet.isValidMnemonic('some long mnemonic phrase')
```

Returns **[Boolean][125]** true if the mnemonic is valid, false otherwise

## newMnemonic

generates a new mnemonic

**Examples**

```javascript
let newMnemonic = paratii.eth.wallet.generateMnemonic()
```

Returns **[String][124]** newly generated mnemonic

## \_decrypt

decrypts the wallet

**Parameters**

-   `data` **[Object][122]** encrypted wallet
-   `password` **[String][124]** password to decrypt

**Examples**

```javascript
let decryptedWallet = paratii.eth.wallet._decrypt(encryptedWallet,'some-psw')
```

Returns **[Object][122]** decrypted wallet

## ParatiiIPFS

**Extends EventEmitter**

Contains functions to interact with the IPFS instance.

**Parameters**

-   `config` **[Object][122]** configuration object to initialize Paratii object

### add

Adds the file to ipfs

**Parameters**

-   `fileStream` **ReadStream** ReadStream of the file. Can be created with fs.createReadStream(path)

**Examples**

```javascript
let path = 'test/data/some-file.txt'
let fileStream = fs.createReadStream(path)
let result = await paratiiIPFS.add(fileStream)
```

Returns **[Promise][123]** data about the added file (path,multihash,size)

### get

get file from ipfs

**Parameters**

-   `hash` **[String][124]** multihash of the file

**Examples**

```javascript
let result = await paratiiIPFS.add(fileStream)
let hash = result[0].hash
let fileContent = await paratiiIPFS.get(hash)
```

Returns **[Promise][123]** the file (path,content)

### log

log messages on the console if verbose is set

**Parameters**

-   `msg` **[String][124]** text to log

**Examples**

```javascript
paratii.ipfs.log("some-text")
```

### warn

log warns on the console if verbose is set

**Parameters**

-   `msg` **[String][124]** warn text

**Examples**

```javascript
paratii.ipfs.warn("some-text")
```

### error

log errors on the console if verbose is set

**Parameters**

-   `msg` **[String][124]** error message

**Examples**

```javascript
paratii.ipfs.error("some-text")
```

### getIPFSInstance

get an ipfs instance of jsipfs. Singleton pattern

**Examples**

```javascript
ipfs = await paratii.ipfs.getIPFSInstance()
```

Returns **[Object][122]** Ipfs instance

### addJSON

adds a data Object to the IPFS local instance

**Parameters**

-   `data` **[Object][122]** JSON object to store

**Examples**

```javascript
let result = await paratiiIPFS.addJSON(data)
```

Returns **[Promise][123]** promise with the ipfs multihash

### addAndPinJSON

convenient method to add JSON and send it for persistance storage.

**Parameters**

-   `data` **[object][122]** JSON object to store

**Examples**

```javascript
let result = await paratiiIPFS.addAndPinJSON(data)
```

Returns **[string][124]** returns multihash of the stored object.

### getJSON

gets a JSON object stored in IPFS

**Parameters**

-   `multihash` **[String][124]** ipfs multihash of the object

**Examples**

```javascript
let jsonObj = await paratiiIPFS.getJSON('some-multihash')
```

Returns **[Promise][123]** requested Object

### start

Starts the IPFS node

**Parameters**

-   `callback` **[Function][126]** callback function

**Examples**

```javascript
?
```

Returns **?** DON'T KNOW?

### stop

Stops the IPFS node.

**Parameters**

-   `callback` **[Function][126]** callback function

**Examples**

```javascript
?
```

Returns **?** DON'T KNOW?

## Uploader

**Extends EventEmitter**

IPFS UPLOADER : Paratii IPFS uploader interface.

**Parameters**

-   `opts` **[Object][122]** 

### onDrop

????

**Parameters**

-   `ev` **?** ?

Returns **?** ?

### xhrUpload

Upload a file over XHR to the transcoder. To be called with an event emitter as the last argument

**Parameters**

-   `file` **[Object][122]** file to upload
-   `hashedFile` **[String][124]** hash of the file ??
-   `ev` **EventEmitter** event emitter

**Examples**

```javascript
this.xhrUpload(file, hashedFile, ev)
```

### add

uploads a single file to _local_ IPFS node

**Parameters**

-   `file` **File** HTML5 File Object.

**Examples**

```javascript
let uploaderEv = paratiiIPFS.uploader.add(files)
```

Returns **EventEmitter** checkout the upload function below for details.

### html5FileToPull

returns a generic File Object with a Pull Stream from an HTML5 File

**Parameters**

-   `file` **File** HTML5 File Object

**Examples**

```javascript
?
```

Returns **[Object][122]** generic file object.

### fsFileToPull

returns a generic file Object from a file path

**Parameters**

-   `filePath` **[String][124]** Path to file.

**Examples**

```javascript
?
```

Returns **[Object][122]** generic file object.

### upload

upload an Array of files as is to the local IPFS node

**Parameters**

-   `files` **[Array][128]** HTML5 File Object Array.

**Examples**

```javascript
?
```

Returns **EventEmitter** returns EventEmitter with the following events:-   'start': uploader started.
-   'progress': (chunkLength, progressPercent)
-   'fileReady': (file) triggered when a file is uploaded locally.
-   'done': (files) triggered when the uploader is done locally.
-   'error': (err) triggered whenever an error occurs.

### addDirectory

upload an entire directory to IPFS

**Parameters**

-   `dirPath` **[String][124]** path to directory

**Examples**

```javascript
?
```

Returns **[Promise][123]** returns the {multihash, path, size} for the uploaded folder.

### transcode

signals transcoder(s) to transcode fileHash

**Parameters**

-   `fileHash` **[String][124]** IPFS file hash.
-   `options` **[Object][122]** ref: [https://github.com/Paratii-Video/paratii-lib/blob/master/docs/paratii-ipfs.md#ipfsuploadertranscodefilehash-options][129]

**Examples**

```javascript
?
```

Returns **EventEmitter** returns EventEmitter with the following events:-   'uploader:progress': (hash, chunkSize, percent) client to transcoder upload progress.
-   'transcoding:started': (hash, author)
-   'transcoding:progress': (hash, size, percent)
-   'transcoding:downsample:ready' (hash, size)
-   'transcoding:done': (hash, transcoderResult) triggered when the transcoder is done - returns the hash of the transcoded file
-   'transcoder:error': (err) triggered whenever an error occurs.

### \_transcoderRespHander

handles responses from the paratii-protocol in case of transcoding.

**Parameters**

-   `ev` **EventEmitter** the transcoding job EventEmitter
-   `fileHash`  

**Examples**

```javascript
?
```

Returns **[function][126]** returns various events based on transcoder response.

### addAndTranscode

convenience method for adding and transcoding files

**Parameters**

-   `files` **[Array][128]** Array of HTML5 File Objects

### \_signalTranscoder

[_signalTranscoder description]

**Parameters**

-   `files` **\[type]** [description]
-   `ev` **\[type]** [description]

Returns **\[type]** [description]

### getMetaData

[getMetaData description]

**Parameters**

-   `fileHash` **\[type]** [description]
-   `options` **\[type]** [description]

Returns **\[type]** [description]

### pinFile

[pinFile description]

**Parameters**

-   `fileHash` **\[type]** [description]
-   `options` **\[type]** [description]

Returns **\[type]** [description]

### \_pinResponseHandler

[_pinResponseHandler description]

**Parameters**

-   `ev` **\[type]** [description]

Returns **\[type]** [description]

## Paratii

Paratii library main object
The Paratii object serves as the general entry point for interacting with the family of Paratii
contracts that are deployed on the blockchain, utilities to run and interact with a local IPFS node,
and utilities to interact with the Paratii index.

**Parameters**

-   `opts` **[accountSchema][130]** options object to configure paratii library
    -   `opts.provider` **[String][124]** optional - the address of an ethereum node (defaults to localhost:8754)
    -   `opts.registryAddress` **[String][124]** optional - the address where the Paratii Contract registry can be found
    -   `opts.address` **[String][124]** optional - address of the operator/user
    -   `opts.privateKey` **[String][124]** optional - private key of the user
    -   `opts.ipfs` **[Object][122]** TODO fix ipfs.repo --> ipfsrepo
        -   `opts.ipfs.repo` **[String][124]** optional - namespace of the ipfs repository
    -   `opts.db` **[Object][122]** TODO fix db.provider --> dbprovider
        -   `opts.db.provider` **[String][124]** optional - baseURL of the mongoDb mirror
    -   `opts.mnemonic` **[String][124]** optional - mnemonic of the user

**Examples**

```javascript
paratii = new Paratii({ 'eth.provider': 'http://localhost:8545', address: 'some-user-id', privateKey: 'some-user-priv-key'})
```

### setAccount

Set the ethereum address what will be used to sign all transactions

**Parameters**

-   `address` **[String][124]** address of the operator/user
-   `privateKey` **[String][124]** optional - private key of the operator/user

**Examples**

```javascript
paratii.setAccount('some-user-id','some-user-pub-key')
```

### setRegistryAddress

Set the address of the ParatiiRegistry contract

**Parameters**

-   `address` **[String][124]** address of the ParatiiRegistry contract

**Examples**

```javascript
paratii.setRegistryAddress('some-address')
```

### diagnose

return an array of strings with diagnostic info

**Examples**

```javascript
paratii.diagnose()
```

Returns **[Promise][123]** array of strings with diagnostic info

## accountSchema

Type: [Array][128]

**Properties**

-   `address` **[string][124]?** 
-   `privateKey` **[string][124]?** 
-   `mnemonic` **[string][124]?** 

[1]: #paratiicore

[2]: #migrateaccount

[3]: #paratiicoreusers

[4]: #create

[5]: #get

[6]: #update

[7]: #paratiicorevids

[8]: #like

[9]: #dislike

[10]: #doeslike

[11]: #hasviewedvideo

[12]: #doesdislike

[13]: #create-1

[14]: #update-1

[15]: #upsert

[16]: #view

[17]: #get-1

[18]: #search

[19]: #paratiidb

[20]: #paratiidbusers

[21]: #get-2

[22]: #videos

[23]: #paratiidbvids

[24]: #get-3

[25]: #search-1

[26]: #paratiiethevents

[27]: #_getstructuredevent

[28]: #addlistener

[29]: #_addlistener

[30]: #_isfunction

[31]: #addsubscription

[32]: #removeallsubscriptions

[33]: #paratiieth

[34]: #setaccount

[35]: #getcontract

[36]: #requirecontract

[37]: #deploycontract

[38]: #sleep

[39]: #deploycontracts

[40]: #setcontractsprovider

[41]: #getcontracts

[42]: #getcontractaddress

[43]: #getregistryaddress

[44]: #setregistryaddress

[45]: #balanceof

[46]: #_transfereth

[47]: #_transferpti

[48]: #transfer

[49]: #paratiiethtcr

[50]: #gettcrcontract

[51]: #getmindeposit

[52]: #iswhitelisted

[53]: #didvideoapply

[54]: #apply

[55]: #checkeligiblityandapply

[56]: #exit

[57]: #paratiiethusers

[58]: #getregistry

[59]: #create-2

[60]: #get-4

[61]: #update-2

[62]: #delete

[63]: #paratiiethvids

[64]: #getvideoregistry

[65]: #getlikescontract

[66]: #getviewscontract

[67]: #makeid

[68]: #create-3

[69]: #get-5

[70]: #sendlike

[71]: #view-1

[72]: #userviewedvideo

[73]: #like-1

[74]: #dislike-1

[75]: #doeslike-1

[76]: #doesdislike-1

[77]: #update-3

[78]: #delete-1

[79]: #paratiiethvouchers

[80]: #getvoucherscontract

[81]: #create-4

[82]: #test

[83]: #createvouchers

[84]: #redeem

[85]: #patchwallet

[86]: #create-5

[87]: #isvalidmnemonic

[88]: #newmnemonic

[89]: #_decrypt

[90]: #paratiiipfs

[91]: #add

[92]: #get-6

[93]: #log

[94]: #warn

[95]: #error

[96]: #getipfsinstance

[97]: #addjson

[98]: #addandpinjson

[99]: #getjson

[100]: #start

[101]: #stop

[102]: #uploader

[103]: #ondrop

[104]: #xhrupload

[105]: #add-1

[106]: #html5filetopull

[107]: #fsfiletopull

[108]: #upload

[109]: #adddirectory

[110]: #transcode

[111]: #_transcoderresphander

[112]: #addandtranscode

[113]: #_signaltranscoder

[114]: #getmetadata

[115]: #pinfile

[116]: #_pinresponsehandler

[117]: #paratii

[118]: #setaccount-1

[119]: #setregistryaddress-1

[120]: #diagnose

[121]: #accountschema

[122]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object

[123]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise

[124]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String

[125]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean

[126]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function

[127]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number

[128]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array

[129]: https://github.com/Paratii-Video/paratii-lib/blob/master/docs/paratii-ipfs.md#ipfsuploadertranscodefilehash-options

[130]: #accountschema
