<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### Table of Contents

-   [ParatiiCore][1]
-   [ParatiiCoreUsers][2]
    -   [create][3]
-   [ParatiiCoreVids][4]
    -   [like][5]
    -   [dislike][6]
    -   [doesLike][7]
    -   [hasViewedVideo][8]
    -   [doesDislike][9]
    -   [create][10]
    -   [update][11]
    -   [upsert][12]
-   [ParatiiDb][13]
-   [fetch][14]
-   [joi][15]
-   [constructor][16]
-   [getTcrContract][17]
-   [getMinDeposit][18]
-   [isWhitelisted][19]
-   [didVideoApply][20]
-   [apply][21]
-   [checkEligiblityAndApply][22]
-   [ParatiiEthUsers][23]
-   [addAndPinJSON][24]
-   [require][25]
-   [add][26]
-   [html5FileToPull][27]
-   [fsFileToPull][28]
-   [upload][29]
-   [addDirectory][30]
-   [transcode][31]
-   [\_transcoderRespHander][32]
-   [addAndTranscode][33]
-   [Paratii][34]

## ParatiiCore

ParatiiCore
Contains functions that operate transversally over several backend systems.

**Parameters**

-   `config` **[Object][35]** configuration object to initialize Paratii object

## ParatiiCoreUsers

ParatiiCoreUsers

**Parameters**

-   `config`  

### create

[create description]

**Parameters**

-   `options` **\[type]** [description]

Returns **[Promise][36]** [description]

## ParatiiCoreVids

validates the config file

**Parameters**

-   `config` **[Object][35]** configuration object to initialize Paratii object

### like

Writes a like for the video on the blockchain (contract Likes), and negates a dislike for the video, if it exists.

**Parameters**

-   `videoId` **[String][37]** univocal video identifier

Returns **[Object][35]** information about the transaction recording the like

### dislike

Writes a dislike for the video on the blockchain (contract Likes), and negates a like for the video, if it exists.

**Parameters**

-   `videoId` **[String][37]** univocal video identifier

Returns **[Object][35]** information about the transaction recording the dislike

### doesLike

Check if the current user has already liked the video

**Parameters**

-   `videoId` **[String][37]** univocal video identifier

Returns **[Boolean][38]** true if the current user already liked the video, false otherwise

### hasViewedVideo

[hasViewedVideo description]

**Parameters**

-   `viewer` **[String][37]** viewer address
-   `videoId` **[String][37]** univocal video identifier

Returns **[Boolean][38]** true if the current user already liked the video, false otherwise

### doesDislike

Check if the current user has already disliked the video

**Parameters**

-   `videoId` **[String][37]** univocal video identifier

Returns **[Boolean][38]** true if the current user already disliked the video, false otherwise

### create

This call will register the video on the blockchain, add its metadata to IPFS, upload file to IPFS, and transcode it

**Parameters**

-   `options` **[Object][35]** information about the video ( videoId, title, FilePath ... )

Returns **[Promise][36]** information about the video ( VideoId, owner, ipfsHash ... )

### update

Update the information on the video.
 Only the account that has registered the video, or the owner of the contract, can update the information.

**Parameters**

-   `videoId` **[String][37]** univocal video identifier
-   `options` **[Object][35]** key value pairs of properties and new values e.g. ({title: 'another-title'})
-   `dataToUpdate` **[Object][35]** optional. old data of the video. If not passed to the method, it will fetch the data itself using the videoId

Returns **[Promise][36]** Updated video informations

### upsert

Update the information of the video the video already exists, otherwise it creates it

**Parameters**

-   `options` **[Object][35]** video information

Returns **[Promise][36]** updated/new video informations

## ParatiiDb

ParatiiDb contains a functionality to interact with the Paratii Blockchain Index

**Parameters**

-   `config`  

## fetch

ParatiiDb contains a functionality to interact with the Paratii Blockchain Index

## joi

ParatiiDb contains a functionality to interact with the Paratii Blockchain Index

## constructor

TCR functionality

**Parameters**

-   `context` **[object][35]** ParatiiEth Instance

Returns **TCR** returns instances of Tcr

## getTcrContract

get TCR contract instance.

Returns **[Promise][36]** Contract instance.

## getMinDeposit

get the minimum amount required to stake a video.

Returns **Float** amount required in PTI

## isWhitelisted

check if video is already whitelisted or not. note that this returns false
till the video is actually whitelisted. use didVideoApply in case you want
to check whether the video is in application process.

**Parameters**

-   `videoId` **[string][37]** videoId

Returns **[boolean][38]** is video whitelisted or not.

## didVideoApply

check whether a video started the application process or not yet.

**Parameters**

-   `videoId` **[string][37]** videoId

Returns **[boolean][38]** did the video start the TCR process.

## apply

start the application process.
NOTE that this require the client approves PTI amount first before actually
running this function, use `checkEligiblityAndApply` instead.

**Parameters**

-   `videoId` **[string][37]** videoId
-   `amountToStake` **Float** number of tokens to stake. must >= minDeposit

Returns **[boolean][38]** returns true if all is good, plus \_Application
event.

## checkEligiblityAndApply

check whether the user has enough funds to stake.
it also approves the TCR contract to amountToStake.

**Parameters**

-   `videoId` **\[type]** [description]
-   `amountToStake` **\[type]** [description]

Returns **[Promise][36]** [description]

## ParatiiEthUsers

[eth description]

Type: \[type]

**Parameters**

-   `context`  

## addAndPinJSON

convenient method to add JSON and send it for persistance storage.

**Parameters**

-   `data` **[object][35]** JSON object to store

Returns **[string][37]** returns multihash of the stored object.

## require

## add

uploads a single file to _local_ IPFS node

**Parameters**

-   `file` **File** HTML5 File Object.

Returns **EventEmitter** checkout the upload function below for details.

## html5FileToPull

returns a generic File Object with a Pull Stream from an HTML5 File

**Parameters**

-   `file` **File** HTML5 File Object

Returns **[Object][35]** generic file object.

## fsFileToPull

returns a generic file Object from a file path

**Parameters**

-   `filePath` **[String][37]** Path to file.

Returns **[Object][35]** generic file object.

## upload

upload an Array of files as is to the local IPFS node

**Parameters**

-   `files` **[Array][39]** HTML5 File Object Array.

Returns **EventEmitter** returns EventEmitter with the following events:-   'start': uploader started.
-   'progress': (chunkLength, progressPercent)
-   'fileReady': (file) triggered when a file is uploaded locally.
-   'done': (files) triggered when the uploader is done locally.
-   'error': (err) triggered whenever an error occurs.

## addDirectory

upload an entire directory to IPFS

**Parameters**

-   `dirPath` **[String][37]** path to directory

Returns **[Promise][36]** returns the {hash, path, size} for the uploaded folder.

## transcode

signals transcoder(s) to transcode fileHash

**Parameters**

-   `fileHash` **[String][37]** IPFS file hash.
-   `options` **[Object][35]** ref: [https://github.com/Paratii-Video/paratii-lib/blob/master/docs/paratii-ipfs.md#ipfsuploadertranscodefilehash-options][40]

Returns **EventEmitter** returns EventEmitter with the following events:-   'uploader:progress': (hash, chunkSize, percent) client to transcoder upload progress.
-   'transcoding:started': (hash, author)
-   'transcoding:progress': (hash, size, percent)
-   'transcoding:downsample:ready' (hash, size)
-   'transcoding:done': (hash, transcoderResult) triggered when the transcoder is done - returns the hash of the transcoded file
-   'transcoder:error': (err) triggered whenever an error occurs.

## \_transcoderRespHander

handles responses from the paratii-protocol in case of transcoding.

**Parameters**

-   `ev` **EventEmitter** the transcoding job EventEmitter
-   `fileHash`  

Returns **[function][41]** returns various events based on transcoder response.

## addAndTranscode

convenience method for adding and transcoding files

**Parameters**

-   `files` **[Array][39]** Array of HTML5 File Objects

## Paratii

Paratii Library
for usage, see [https://github.com/Paratii-Video/paratii-contracts/tree/master/docs][42]

**Parameters**

-   `opts`   (optional, default `{}`)

[1]: #paratiicore

[2]: #paratiicoreusers

[3]: #create

[4]: #paratiicorevids

[5]: #like

[6]: #dislike

[7]: #doeslike

[8]: #hasviewedvideo

[9]: #doesdislike

[10]: #create-1

[11]: #update

[12]: #upsert

[13]: #paratiidb

[14]: #fetch

[15]: #joi

[16]: #constructor

[17]: #gettcrcontract

[18]: #getmindeposit

[19]: #iswhitelisted

[20]: #didvideoapply

[21]: #apply

[22]: #checkeligiblityandapply

[23]: #paratiiethusers

[24]: #addandpinjson

[25]: #require

[26]: #add

[27]: #html5filetopull

[28]: #fsfiletopull

[29]: #upload

[30]: #adddirectory

[31]: #transcode

[32]: #_transcoderresphander

[33]: #addandtranscode

[34]: #paratii

[35]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object

[36]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise

[37]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String

[38]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean

[39]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array

[40]: https://github.com/Paratii-Video/paratii-lib/blob/master/docs/paratii-ipfs.md#ipfsuploadertranscodefilehash-options

[41]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function

[42]: https://github.com/Paratii-Video/paratii-contracts/tree/master/docs
